<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lists - Project</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="project-page.css">
</head>
<body>
    <!-- Image Center Popup -->
    <div class="image-center-popup" id="image-popup">
        <!-- DRAG ZONE: Navigation bar (draggable) -->
        <div class="popup-nav" id="popup-nav">
            <ul class="wrapper-actions">
                <li class="popup-actions popup-close" id="popup-close"></li>
                <li class="popup-actions popup-minimise" id="popup-minimise"></li>
                <li class="popup-actions popup-expand" id="popup-expand"></li>
            </ul>
            <span id="popup-filename"></span>
            <!-- Draggable area - excludes corners like native macOS -->
            <div class="draggable-area"></div>
        </div>
        
        <!-- RESIZE ZONE: Image container (resizable from corners) -->
        <div class="popup-image-container" id="popup-image-container">
            <picture>
                <img id="popup-image" src="" alt="">
            </picture>
        </div>
        
        <!-- RESIZE HANDLES: Four corner resize areas - positioned relative to popup container -->
        <div class="resize-handle resize-handle-nw" id="resize-nw"></div>
        <div class="resize-handle resize-handle-ne" id="resize-ne"></div>
        <div class="resize-handle resize-handle-sw" id="resize-sw"></div>
        <div class="resize-handle resize-handle-se" id="resize-se"></div>
        
        <!-- NAVIGATION ZONES: Left/right image navigation (isolated) -->
        <div class="popup-nav-left" id="popup-nav-left"></div>
        <div class="popup-nav-right" id="popup-nav-right"></div>
    </div>

    <!-- Video Popup -->
    <div class="video-popup" id="videoPopup">
        <div class="video-popup-content">
            <button class="video-popup-close" onclick="closeVideoPopup()">&times;</button>
            <div id="videoPopupContent"></div>
        </div>
    </div>

    <div class="project-page-container">
        <!-- Flower GIF - Bottom Left Corner -->
        <img src="flower.gif" alt="Flower" class="flower-gif">
        
        <!-- Header Section - Simple structure for project page -->
        <div class="page-header">
            <div class="page-content">
                <h1 class="name-text" id="project-header">
                    <a href="index.html" class="name-link">
                        ISHA KUMAR
                    </a><span class="slash">/</span>
                    <a href="#" class="name-link active">
                        LISTS
                    </a>
                    <span class="project-year">2024 - 2025</span>
                </h1>
            </div>
        </div>
        
        <!-- PROJECT CONTENT AREA -->
        <section class="project-content-area">
            <div class="project-text-block">
                <p class="project-description">
                    We recently launched Slack Lists, a simple project management tool for tracking updates, decisions, and tasks in the flow of conversation. I contributed several elements of the visual design and led design for assignment and task management.
                </p>
                <p class="project-description">
                    My work on task tracking evolved into a net-new product initiative called To-Dos, set to GA this year.
                </p>
            </div>
            <div class="project-credits">
                <p class="credits-text">
                    Many thanks to Natalie Liu, Kyle Meyer, Anna Niess, Katie Stiegman, Hieu Nguyen for their time and talent.
                </p>
            </div>
        </section>
        
        <!-- Project Images Work Container -->
        <section class="project-images-section">
            <ul class="image-list">
                <li class="image">
                    <div class="wrapper-image">
                        <img src="project-images/Lists Overview.png" alt="Lists Overview">
                    </div>
                    <div class="title">
                        <span>Lists Overview.png</span>
                    </div>
                </li>
                <li class="image">
                    <div class="wrapper-image">
                        <img src="project-images/Lists Detail.png" alt="Lists Detail">
                    </div>
                    <div class="title">
                        <span>Lists Detail.png</span>
                    </div>
                </li>
                <li class="image">
                    <div class="wrapper-image">
                        <img src="project-images/Lists Interactions.png" alt="Lists Interactions">
                    </div>
                    <div class="title">
                        <span>Lists Interactions.png</span>
                    </div>
                </li>
                <li class="video" onclick="openVideoPopup('https://player.vimeo.com/video/723602484?h=98633cdd86&badge=0&autoplay=1&loop=1&autopause=0&muted=1&background=1&player_id=0&app_id=58479')">
                    <div class="wrapper-iframe">
                        <div class="iframe">
                            <div class="responsive-iframe landscape">
                                <iframe loading="lazy" src="https://player.vimeo.com/video/723602484?h=98633cdd86&badge=0&autoplay=1&loop=1&autopause=0&muted=1&background=1&player_id=0&app_id=58479" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen title="Lists Demo Video" data-ready="true"></iframe>
                            </div>
                        </div>
                    </div>
                    <div class="title">
                        <span>lists-demo.mp4</span>
                    </div>
                    <div class="action">
                        <span>Enlarge</span>
                    </div>
                </li>
            </ul>
        </section>
    </div>

            <!-- Dynamic font sizing and scroll behavior script -->
        <script>
            function adjustFontSize() {
                const textElements = document.querySelectorAll('.project-description');
                const viewportHeight = window.innerHeight;
                const headerHeight = document.querySelector('.page-header').offsetHeight;
                const margins = 80; // 40px top + 40px bottom = 80px
                const availableHeight = viewportHeight - headerHeight - margins;
                
                // Start with a large font size and reduce until it fits
                let fontSize = 100;
                
                // Apply font size to all paragraphs
                textElements.forEach(element => {
                    element.style.fontSize = fontSize + 'px';
                });
                
                // Check if the entire text block fits
                const textBlock = document.querySelector('.project-text-block');
                while (textBlock.scrollHeight > availableHeight && fontSize > 8) {
                    fontSize -= 1;
                    textElements.forEach(element => {
                        element.style.fontSize = fontSize + 'px';
                    });
                }
                
                // Ensure no scrolling by setting a final check
                if (textBlock.scrollHeight > availableHeight) {
                    fontSize = Math.floor(availableHeight / textBlock.scrollHeight * fontSize);
                    textElements.forEach(element => {
                        element.style.fontSize = fontSize + 'px';
                    });
                }
            }
            
            // Project Images Container Scroll Behavior
            function initProjectImagesScroll() {
                const projectImagesSection = document.querySelector('.project-images-section');
                const viewportHeight = window.innerHeight;
                const projectImagesHeight = projectImagesSection.offsetHeight;
                
                // LERP variables for smooth movement
                let currentTop = viewportHeight;
                let targetTop = viewportHeight;
                const lerpFactor = 0.05; // More inertia - lower = gooier
                
                // Momentum variables for LSVP-style gooey feel
                let velocity = 0;
                let isScrolling = false;
                let lastScrollY = 0;
                let scrollTimeout;
                
                // Set initial position: top edge at bottom of viewport
                projectImagesSection.style.top = viewportHeight + 'px';
                
                function updateProjectImagesPosition() {
                    const scrollY = window.pageYOffset;
                    const scrollDelta = scrollY - lastScrollY;
                    lastScrollY = scrollY;
                    
                    // Detect if user is actively scrolling
                    isScrolling = true;
                    clearTimeout(scrollTimeout);
                    scrollTimeout = setTimeout(() => {
                        isScrolling = false;
                    }, 100); // Consider scrolling stopped after 100ms
                    
                    // Apply scroll multiplier to slow down overall movement (LSVP technique)
                    const scrollMultiplier = 0.25; // Even slower for more gooey feel
                    const adjustedScrollY = scrollY * scrollMultiplier;
                    
                    // Calculate scroll progress based on images container height
                    const maxScroll = projectImagesHeight;
                    const scrollProgress = Math.min(adjustedScrollY / maxScroll, 1);
                    
                    // Enhanced easing for more dramatic momentum building and deceleration
                    let easedProgress;
                    if (scrollProgress < 0.25) {
                        // Start even slower (0-25% of scroll) - more dramatic slow start
                        easedProgress = scrollProgress * scrollProgress * scrollProgress * 0.3;
                    } else if (scrollProgress < 0.65) {
                        // Build momentum (25-65% of scroll) - more aggressive acceleration
                        easedProgress = 0.012 + (scrollProgress - 0.25) * 2.2;
                    } else {
                        // Ease out with very dramatic deceleration (65-100% of scroll)
                        const finalProgress = (scrollProgress - 0.65) / 0.35;
                        easedProgress = 0.892 + (1 - Math.pow(1 - finalProgress, 4.5));
                    }
                    
                    // Calculate new top position
                    const startTop = viewportHeight;
                    const endTop = 0;
                    const newTop = startTop - (easedProgress * (startTop - endTop));
                    
                    // Apply LERP for smooth, fluid movement
                    targetTop = newTop;
                }
                
                // Enhanced LERP update function with momentum
                function updateLERP() {
                    if (isScrolling) {
                        // During active scroll: smooth interpolation
                        currentTop += (targetTop - currentTop) * lerpFactor;
                    } else {
                        // After scroll stops: apply momentum for gooey feel
                        velocity += (targetTop - currentTop) * 0.02; // Momentum force
                        velocity *= 0.92; // Air resistance/damping
                        currentTop += velocity;
                        
                        // Stop momentum when very close to target
                        if (Math.abs(targetTop - currentTop) < 0.5 && Math.abs(velocity) < 0.1) {
                            currentTop = targetTop;
                            velocity = 0;
                        }
                    }
                    
                    // Apply the smoothed position
                    projectImagesSection.style.top = currentTop + 'px';
                    
                    // Continue animation if we're still moving or have momentum
                    if (Math.abs(targetTop - currentTop) > 0.1 || Math.abs(velocity) > 0.1) {
                        requestAnimationFrame(updateLERP);
                    }
                }
                
                // Update on scroll
                window.addEventListener('scroll', updateProjectImagesPosition);
                
                // Initial position update
                updateProjectImagesPosition();
            }
            
            // Adjust on load and resize
            window.addEventListener('load', () => {
                adjustFontSize();
                initProjectImagesScroll();
            });
            window.addEventListener('resize', () => {
                adjustFontSize();
                initProjectImagesScroll();
            });
        </script>
        
        <!-- Subtle Weighted Scroll Effect -->
        <script>
            function initWeightedScroll() {
                // Add subtle weight to scrolling without changing positioning
                let ticking = false;
                
                function updateScrollWeight() {
                    if (!ticking) {
                        requestAnimationFrame(() => {
                            const scrolled = window.pageYOffset;
                            
                            // Very subtle header movement for depth
                            const header = document.querySelector('.page-header');
                            if (header) {
                                const yPos = -(scrolled * 0.1); // Very subtle
                                header.style.transform = `translateY(${yPos}px)`;
                            }
                            
                            ticking = false;
                        });
                        ticking = true;
                    }
                }
                
                // Throttle scroll events for performance
                let scrollTimeout;
                window.addEventListener('scroll', () => {
                    if (scrollTimeout) return;
                    scrollTimeout = setTimeout(() => {
                        updateScrollWeight();
                        scrollTimeout = null;
                    }, 16); // ~60fps
                });
                
                // Initial call
                updateScrollWeight();
            }
            
            // Initialize weighted scroll when DOM is loaded
            document.addEventListener('DOMContentLoaded', function() {
                initWeightedScroll();
            });
        </script>
        
        <!-- Image Popup Functionality -->
        <script>
            // Popup Configuration - Centralized settings
            const POPUP_CONFIG = {
                // Dimensions
                minSize: 200,
                maxSizePercent: 0.95,
                
                // Animation timing
                closeAnimationDuration: 400,
                
                // Z-index values
                popupZIndex: 10000,
                resizeHandleZIndex: 10001,
                navigationZIndex: 9999,
                
                // Navigation area dimensions
                navigationAreaWidth: 60,
                navigationAreaTopOffset: 60
            };
        
        // Get popup elements with error handling
        const imagePopup = document.getElementById('image-popup');
        const popupImage = document.getElementById('popup-image');
        const popupFilename = document.getElementById('popup-filename');
        const popupClose = document.getElementById('popup-close');
        const popupMinimise = document.getElementById('popup-minimise');
        const popupExpand = document.getElementById('popup-expand');
        const popupNavLeft = document.getElementById('popup-nav-left');
        const popupNavRight = document.getElementById('popup-nav-right');
        
        // Validate required elements exist
        if (!imagePopup || !popupImage || !popupFilename || !popupClose) {
            console.error('Required popup elements not found. Popup functionality disabled.');
            throw new Error('Missing required popup elements');
        }
        
        // Get all project images
        const projectImages = document.querySelectorAll('.wrapper-image img');
        
        if (projectImages.length === 0) {
            console.warn('No project images found. Image popup functionality disabled.');
        }
        
        // Popup state management - completely isolated
        let currentImageIndex = 0;
        
        // Utility functions for common popup operations
        const popupUtils = {
            // Set popup position with bounds checking
            setPosition: (element, x, y) => {
                const rect = element.getBoundingClientRect();
                const viewportWidth = window.innerWidth;
                const viewportHeight = window.innerHeight;
                
                // Constrain to viewport bounds
                const constrainedX = Math.max(0, Math.min(x, viewportWidth - rect.width));
                const constrainedY = Math.max(0, Math.min(y, viewportHeight - rect.height));
                
                element.style.left = constrainedX + 'px';
                element.style.top = constrainedY + 'px';
                element.style.transform = 'none';
            },
            
            // Add dragging state to popup
            addDraggingState: (element) => {
                element.classList.add('dragging');
            },
            
            // Remove dragging state from popup
            removeDraggingState: (element) => {
                element.classList.remove('dragging');
            },
            
            // Reset popup position for next open
            resetPosition: (element) => {
                element.style.left = '';
                element.style.top = '';
                element.style.transform = '';
            },
            
            // Check if element is within viewport bounds
            isWithinViewport: (element) => {
                const rect = element.getBoundingClientRect();
                return rect.top >= 0 && rect.left >= 0 && 
                       rect.bottom <= window.innerHeight && 
                       rect.right <= window.innerWidth;
            }
        };
        
        // Open popup when image is clicked
        if (projectImages.length > 0) {
            projectImages.forEach((img, index) => {
                img.addEventListener('click', () => {
                    try {
                        // Set current image index
                        currentImageIndex = index;
                        
                        // Get image source and exact filename from title span
                        const imageSrc = img.src;
                        const titleSpan = img.closest('.image')?.querySelector('.title span');
                        const filename = titleSpan ? titleSpan.textContent : 'image.png';
                        
                        // Set popup content
                        popupImage.src = imageSrc;
                        popupImage.alt = img.alt || '';
                        popupFilename.textContent = filename;
                        
                        // Wait for image to load, then show popup
                        popupImage.onload = () => {
                            // Calculate minimum size needed for this image
                            const imageMinSize = calculateMinimumPopupSize();
                            
                            // Set a comfortable default size (smaller than viewport, larger than minimum)
                            const viewportWidth = window.innerWidth;
                            const viewportHeight = window.innerHeight;
                            
                            // macOS Preview approach: Comfortable default sizing
                            // Always use 75% of viewport, regardless of image size
                            const defaultWidth = viewportWidth * 0.75;
                            const defaultHeight = viewportHeight * 0.75;
                            
                            // Ensure we don't exceed viewport
                            const finalWidth = Math.min(defaultWidth, viewportWidth);
                            const finalHeight = Math.min(defaultHeight, viewportHeight);
                            
                            // Set initial size
                            imagePopup.style.width = finalWidth + 'px';
                            imagePopup.style.height = finalHeight + 'px';
                            
                            // Show popup (CSS already centers it perfectly)
                            imagePopup.classList.add('active');
                        };
                        
                        // If image is already loaded, size immediately
                        if (popupImage.complete) {
                            popupImage.onload();
                        }
                        
                        // Popup is now self-contained - no body changes needed
                    } catch (error) {
                        console.error('Error opening popup:', error);
                    }
                });
            });
        }
        
        // Close popup ONLY when red X button is clicked
        if (popupClose) {
            popupClose.addEventListener('click', closePopup);
        }
        
        // Minimize button - currently disabled (no functionality)
        if (popupMinimise) {
            popupMinimise.addEventListener('click', () => {
                console.log('Minimize clicked - functionality not implemented yet');
            });
        }
        
        // Expand button - currently disabled (no functionality)
        if (popupExpand) {
            popupExpand.addEventListener('click', () => {
                console.log('Expand clicked - functionality not implemented yet');
            });
        }
        
        // Function to close popup
        function closePopup() {
            imagePopup.classList.add('closing');
            
            setTimeout(() => {
                imagePopup.classList.remove('active', 'closing');
                popupUtils.resetPosition(imagePopup);
            }, POPUP_CONFIG.closeAnimationDuration);
        }
        
        // Navigation functionality
        function navigateToPreviousImage() {
            if (projectImages.length === 0) return;
            currentImageIndex = currentImageIndex > 0 ? currentImageIndex - 1 : projectImages.length - 1;
            updatePopupImage();
        }
        
        function navigateToNextImage() {
            if (projectImages.length === 0) return;
            currentImageIndex = currentImageIndex < projectImages.length - 1 ? currentImageIndex + 1 : 0;
            updatePopupImage();
        }
        
        function updatePopupImage() {
            try {
                if (projectImages.length === 0) return;
                
                const img = projectImages[currentImageIndex];
                const titleSpan = img.closest('.image')?.querySelector('.title span');
                const filename = titleSpan ? titleSpan.textContent : 'image.png';
                
                popupImage.src = img.src;
                popupImage.alt = img.alt || '';
                popupFilename.textContent = filename;
            } catch (error) {
                console.error('Error updating popup image:', error);
            }
        }
        
        // Add navigation event listeners with error handling
        if (popupNavLeft && popupNavRight) {
            popupNavLeft.addEventListener('click', navigateToPreviousImage);
            popupNavRight.addEventListener('click', navigateToNextImage);
        } else {
            console.warn('Navigation areas not found. Image navigation disabled.');
        }
        
        // Keyboard navigation (image switching only)
        document.addEventListener('keydown', (e) => {
            if (imagePopup.classList.contains('active')) {
                switch (e.key) {
                    case 'ArrowLeft':
                        navigateToPreviousImage();
                        break;
                    case 'ArrowRight':
                        navigateToNextImage();
                        break;
                }
            }
        });
        
        // Draggable functionality
        let isDragging = false;
        let dragStartX = 0;
        let dragStartY = 0;
        let popupStartX = 0;
        let popupStartY = 0;
        
        // Resizable functionality
        let isResizing = false;
        let resizeStartX = 0;
        let resizeStartY = 0;
        let resizeStartWidth = 0;
        let resizeStartHeight = 0;
        let resizeStartLeft = 0;
        let resizeStartTop = 0;
        let currentCorner = null;
        
        // Start dragging when mouse is pressed AND moved on navigation bar
        const popupNav = document.querySelector('.popup-nav');
        if (popupNav) {
            popupNav.addEventListener('mousedown', startDrag);
        } else {
            console.warn('Navigation bar not found. Dragging disabled.');
        }
        
        // Prevent dragging when clicking on filename text
        const popupFilenameElement = document.getElementById('popup-filename');
        if (popupFilenameElement) {
            popupFilenameElement.addEventListener('mousedown', (e) => {
                e.stopPropagation(); // Prevent drag from starting
            });
        }
        
        // Start resizing when clicking on corner handles
        const resizeHandles = document.querySelectorAll('.resize-handle');
        if (resizeHandles.length > 0) {
            resizeHandles.forEach(handle => {
                handle.addEventListener('mousedown', startResize);
            });
        } else {
            console.warn('No resize handles found. Resize functionality disabled.');
        }
        
        function startDrag(e) {
            if (e.target.closest('.popup-actions') || 
                e.target.id === 'popup-filename' ||
                e.target.closest('.resize-handle')) {
                return;
            }
            
            isDragging = true;
            
            const rect = imagePopup.getBoundingClientRect();
            popupStartX = rect.left;
            popupStartY = rect.top;
            dragStartX = e.clientX;
            dragStartY = e.clientY;
            
            popupUtils.addDraggingState(imagePopup);
            
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', stopDrag);
            
            e.preventDefault();
        }
        
        function drag(e) {
            if (!isDragging) return;
            
            const deltaX = e.clientX - dragStartX;
            const deltaY = e.clientY - dragStartY;
            
            const newX = popupStartX + deltaX;
            const newY = popupStartY + deltaY;
            
            popupUtils.setPosition(imagePopup, newX, newY);
        }
        
        function stopDrag() {
            isDragging = false;
            document.removeEventListener('mousemove', drag);
            document.removeEventListener('mouseup', stopDrag);
            popupUtils.removeDraggingState(imagePopup);
        }
        
        function startResize(e) {
            e.preventDefault();
            e.stopPropagation();
            
            isResizing = true;
            currentCorner = e.target.id;
            resizeStartX = e.clientX;
            resizeStartY = e.clientY;
            
            const rect = imagePopup.getBoundingClientRect();
            resizeStartWidth = rect.width;
            resizeStartHeight = rect.height;
            resizeStartLeft = rect.left;
            resizeStartTop = rect.top;
            
            imagePopup.classList.add('resizing');
            
            document.addEventListener('mousemove', resize);
            document.addEventListener('mouseup', stopResize);
        }
        
        // Calculate minimum popup size needed to display full image with padding
        function calculateMinimumPopupSize() {
            const img = popupImage;
            if (!img || !img.complete) return { width: POPUP_CONFIG.minSize, height: POPUP_CONFIG.minSize };
            
            const basePadding = 40; // 20px on each side (20px * 2) - minimum padding
            const navigationBarHeight = 60; // Navigation bar height
            
            // Calculate the minimum size needed to show the full image with base padding
            let minWidth = img.naturalWidth + basePadding;
            let minHeight = img.naturalHeight + basePadding + navigationBarHeight;
            
            // Ensure minimum size is respected
            minWidth = Math.max(minWidth, POPUP_CONFIG.minSize);
            minHeight = Math.max(minHeight, POPUP_CONFIG.minSize);
            
            return { width: minWidth, height: minHeight };
        }
        
        function resize(e) {
            if (!isResizing) return;
            
            const deltaX = e.clientX - resizeStartX;
            const deltaY = e.clientY - resizeStartY;
            
            let newWidth = resizeStartWidth;
            let newHeight = resizeStartHeight;
            let newLeft = resizeStartLeft;
            let newTop = resizeStartTop;
            
            switch (currentCorner) {
                case 'resize-se': // Bottom-right: upper-left anchor
                    newWidth = resizeStartWidth + deltaX;
                    newHeight = resizeStartHeight + deltaY;
                    break;
                
                case 'resize-sw': // Bottom-left: upper-right anchor
                    newWidth = resizeStartWidth - deltaX;
                    newHeight = resizeStartHeight + deltaY;
                    newLeft = resizeStartLeft + deltaX;
                    break;
                
                case 'resize-ne': // Top-right: lower-left anchor
                    newWidth = resizeStartWidth + deltaX;
                    newHeight = resizeStartHeight + deltaY;
                    newTop = resizeStartTop + deltaY;
                    break;
                
                case 'resize-nw': // Top-left: lower-right anchor
                    newWidth = resizeStartWidth - deltaX;
                    newHeight = resizeStartHeight + deltaY;
                    newLeft = resizeStartLeft + deltaX;
                    newTop = resizeStartTop + deltaY;
                    break;
            }
            
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            
            const basicMinWidth = 200;
            const basicMinHeight = 200;
            
            newWidth = Math.max(basicMinWidth, newWidth);
            newHeight = Math.max(basicMinHeight, newHeight);
            
            if (newLeft + newWidth > viewportWidth) {
                newWidth = viewportWidth - newLeft;
            }
            
            if (newTop + newHeight > viewportHeight) {
                newHeight = viewportHeight - newTop;
            }
            
            if (newLeft < 0) {
                newLeft = 0;
            }
            
            if (newTop < 0) {
                newTop = 0;
            }
            
            imagePopup.style.width = newWidth + 'px';
            imagePopup.style.height = newHeight + 'px';
            imagePopup.style.left = newLeft + 'px';
            imagePopup.style.top = newTop + 'px';
            imagePopup.style.transform = 'none';
        }
        
        function stopResize() {
            isResizing = false;
            currentCorner = null;
            document.removeEventListener('mousemove', resize);
            document.removeEventListener('mouseup', stopResize);
            
            imagePopup.classList.remove('resizing');
        }
        // Video popup functions
        function openVideoPopup(videoSrc) {
            const videoPopup = document.getElementById('videoPopup');
            const videoPopupContent = document.getElementById('videoPopupContent');
            
            // Create iframe with the video source
            videoPopupContent.innerHTML = `
                <iframe 
                    src="${videoSrc}" 
                    frameborder="0" 
                    allow="autoplay; fullscreen; picture-in-picture" 
                    allowfullscreen 
                    title="Video"
                    width="800"
                    height="450">
                </iframe>
            `;
            
            videoPopup.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function closeVideoPopup() {
            const videoPopup = document.getElementById('videoPopup');
            const videoPopupContent = document.getElementById('videoPopupContent');
            
            videoPopup.classList.remove('active');
            videoPopupContent.innerHTML = '';
            document.body.style.overflow = '';
        }
        
        // Close video popup when clicking outside
        document.getElementById('videoPopup').addEventListener('click', function(e) {
            if (e.target === this) {
                closeVideoPopup();
            }
        });
        
        // Close video popup with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeVideoPopup();
            }
        });
    </script>
</body>
</html>
